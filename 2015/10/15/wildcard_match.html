<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>C语言通配符匹配  &middot; 程序猿的小本本</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="光说有毛用|程序猿的小本本" />

<meta name="keywords" content="">


<meta property="og:title" content="C语言通配符匹配  &middot; 程序猿的小本本 ">
<meta property="og:site_name" content="程序猿的小本本"/>
<meta property="og:url" content="http://www.gsymy.com/2015/10/15/wildcard_match.html" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2015-10-15T03:52:16Z" />
<meta property="og:article:modified_time" content="2015-10-15T03:52:16Z" />

  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@" />
<meta name="twitter:title" content="C语言通配符匹配" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="http://www.gsymy.com/2015/10/15/wildcard_match.html" />
<meta name="twitter:domain" content="http://www.gsymy.com/">
  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "C语言通配符匹配",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2015-10-15",
    "description": "",
    "wordCount":  492 
  }
</script>



<link rel="canonical" href="http://www.gsymy.com/2015/10/15/wildcard_match.html" />

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://www.gsymy.com/touch-icon-144-precomposed.png">
<link href="http://www.gsymy.com/favicon.png" rel="icon">
<meta name="theme-color" content="#2053AB">
<meta name="generator" content="Hugo 0.17-DEV" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link href='https://fonts.googleapis.com/css?family=Merriweather:300%7CRaleway%7COpen+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="http://www.gsymy.com/css/font-awesome.min.css">
<link rel="stylesheet" href="http://www.gsymy.com/css/style.css">
<link rel="stylesheet" href="http://www.gsymy.com/css/highlight/default.css">

  
</head>
<body>
  <main id="main-wrapper" class="container main_wrapper has-sidebar">
    <header id="main-header" class="container main_header">
  <div class="container brand">
  <div class="container title h1-like">
  <a class="baselink" href="http://www.gsymy.com/">
  程序猿的小本本

</a>

</div>

  
<div class="container topline">
  
  光说有毛用


</div>


</div>

  <nav class="container nav primary no-print">
  

<a class="homelink" href="http://www.gsymy.com/">Home</a>


  
<a href="http://www.gsymy.com/about">About</a>

<a href="http://www.gsymy.com/post" title="Show list of posts">Posts</a>

<a href="http://www.gsymy.com/tags" title="Show list of tags">Tags</a>


</nav>

<div class="container nav secondary no-print">
  
<a id="contact-link-email" class="contact_link" href="mailto:chennqqi@qq.com">
  <span class="fa fa-envelope-square"></span><span>email</span></a>



<a id="contact-link-github" class="contact_link" href="https://github.com/chennqqi?tab=repositories">
  <span class="fa fa-github-square"></span><span>github</span></a>

















</div>


  

</header>


<article id="main-content" class="container main_content single">
  <header class="container hat">
  <h1>C语言通配符匹配
</h1>

  <div class="metas">
<time datetime="2015-10-15">15 Oct, 2015</time>


  
    &middot; by admin
  
  &middot; Read in about 3 min
  &middot; (492 Words)
  <br>
  


</div>

</header>

  <div class="container content">
  <p><span style="color: black; font-size: 10pt;">C语言通配符匹配<br /> </span></p>

<p><span style="color: black; font-size: 10pt;">工作中经常会遇到通配符，windows控制台程序，linux shell，还有web服务器配置路径，Makefile中。<br /> </span></p>

<p><span style="color: black; font-size: 10pt;">我来分享两个C语言通配符匹配程序和测试程序；我是抱着拿来主义的想法，年纪大了越越懒得动脑子了。<br /> </span></p>

<p><span style="color: black; font-size: 10pt;"><br /> </span></p>

<p><span style="color: black; font-size: 10pt;">通配符程序中用到的是*和?<br /> </span></p>

<p><span style="color: black; font-size: 10pt;">*表示任意多个任意字符<br /> </span></p>

<p><span style="color: black; font-size: 10pt;">?表示单个任意字符<br /> </span></p>

<p><span style="color: black; font-size: 10pt;">关于通配符的定义引用<a href="http://baike.baidu.com/link?url=Zm-Yxz0MNIZippSBAKlT6vPYOTjAjKo2NKBGDCODoVLcQ7KbJjHFThn9oEtoRItECCpcYiH99KMdPzlWNGVuK" target="_blank">百度百科</a>的一段话<br /> </span></p>

<p><span style="color: black; font-size: 10pt;">通配符是一种特殊语句，主要有星号(*)和问号(?)，用来模糊搜索文件。当查找文件夹时，可以使用它来代替一个或多个真正<a href="http://baike.baidu.com/view/263416.htm"><span style="background-color: white;">字符</span></a>；当不知道真正字符或者懒得输入完整名字时，常常使用通配符代替一个或多个真正的字符。 实际上用&#8221;*Not?paOd&#8221;可以对应Notpad\MyNotpad【*可以代表任何文字】;Notpad\Notepad【?仅代表单个字】;Notepad\Notepod【ao代表a与o里二选一】，其余以此类推。<br /> </span></p>

<p>第一个程序是商业友好的license，请放心使用！</p>

<p><span style="color: #f29100; font-family: Segoe UI; font-size: 22pt;"><span style="background-color: white;">License</span><br /> </span></p>

<p><span style="color: #111111; font-family: Segoe UI; font-size: 10pt;">This article has no explicit license attached to it but may contain usage terms in the article text or the download files themselves. If in doubt please contact the author via the discussion board below.<br /> </span></p>

<p><span style="color: #111111; font-family: Segoe UI; font-size: 10pt;">A list of licenses authors might use can be found <a href="http://www.codeproject.com/info/Licenses.aspx">here</a><span style="color: black;"><br /> </span></span></p>

<p>第二个没有明确标明。</p>

<p>&nbsp;</p>

<p><span style="color: black; font-size: 10pt;">两个程序是类似的，第一个程序用的是循环，第二个程序用的是递归。<span style="font-family: 宋体;"><br /> </span></span></p>

<pre class="EnlighterJSRAW" data-enlighter-language="null">static int wildcmp(const char* wild, const char* pattern)
{
  // Written by Jack Handy - &lt;A href="mailto:jakkhandy@hotmail.com"&gt;jakkhandy@hotmail.com&lt;/A&gt;
  const char *cp = NULL, *mp = NULL;

  while ((*pattern) && (*wild != '*')) 
  {
    if ((*wild != *pattern) && (*wild != '?')) 
    {
      return 0;
    }
    wild++;
    pattern++;
  }

  while (*pattern) 
  {
    if (*wild == '*') 
    {
      if (!*++wild) 
      {
        return 1;
      }
      mp = wild;
      cp = pattern + 1;
    }
    else if ((*wild == *pattern) || (*wild == '?')) 
    {
      wild++;
      pattern++;
    }
    else
    {
      wild = mp;
      pattern = cp++;
    }
  }

  while (*wild == '*') 
  {
    wild++;
  }
  return !*wild;
}


// The main function that checks if two given strings match. The first
// string may contain wildcard characters
static bool match(const char *first,  const char* second)
{
  // If we reach at the end of both strings, we are done
  if (*first == '\0' && *second == '\0')
    return true;

  // Make sure that the characters after '*' are present in second string.
  // This function assumes that the first string will not contain two
  // consecutive '*' 
  if (*first == '*' && *(first + 1) != '\0' && *second == '\0')
    return false;

  // If the first string contains '?', or current characters of both 
  // strings match
  if (*first == '?' || *first == *second)
    return match(first + 1, second + 1);

  // If there is *, then there are two possibilities
  // a) We consider current character of second string
  // b) We ignore current character of second string.
  if (*first == '*')
    return match(first + 1, second) || match(first, second + 1);
  return false;
}

// A function to run test cases
static void test(const char* first, const char* second)
{
  match(first, second) ? puts("Yes") : puts("No");
}

static void test2(const char* first, const char* second)
{
  wildcmp(first, second) ? puts("Yes") : puts("No");
}

int _tmain(int argc, _TCHAR* argv[])
{
  test("g*ks", "geeks"); // Yes
  test("ge?ks*", "geeksforgeeks"); // Yes
  test("g*k", "gee");  // No because 'k' is not in second
  test("*pqrs", "pqrst"); // No because 't' is not in first
  test("abc*bcd", "abcdhghgbcd"); // Yes
  test("abc*c?d", "abcd"); // No because second must have 2 instances of 'c'
  test("*c*d", "abcd"); // Yes
  test("*?c*d", "abcd"); // Yes

  puts("==================================\n");

  test2("g*ks", "geeks"); // Yes
  test2("ge?ks*", "geeksforgeeks"); // Yes
  test2("g*k", "gee");  // No because 'k' is not in second
  test2("*pqrs", "pqrst"); // No because 't' is not in first
  test2("abc*bcd", "abcdhghgbcd"); // Yes
  test2("abc*c?d", "abcd"); // No because second must have 2 instances of 'c'
  test2("*c*d", "abcd"); // Yes
  test2("*?c*d", "abcd"); // Yes

  return 0;
}
</pre>

<p>测试结果:</p>

<!--StartFragment -->

<div>
  <img src="file:///C:\Users\chenqi-s\AppData\Roaming\Tencent\Users\332911480\QQ\WinTemp\RichOle\H{USPRL8631(K1V8N@}9BZX.jpg" alt="" />
</div>

<p><a href="http://www.gsymy.com/wp-content/uploads/2015/10/test.jpg"><img class="alignnone size-full wp-image-472" src="http://www.gsymy.com/wp-content/uploads/2015/10/test.jpg" alt="test" width="843" height="551" /></a></p>

<p>&nbsp;</p>

<p><span style="color: black; font-size: 10pt;">参考链接：<span style="font-family: 宋体;"><br /> </span></span></p>

<p><a href="http://www.codeproject.com/Articles/1088/Wildcard-string-compare-globbing"><span style="font-size: 10pt;">http://www.codeproject.com/Articles/1088/Wildcard-string-compare-globbing</span></a><span style="color: black; font-size: 10pt;"><br /> </span></p>

<p><a href="http://www.geeksforgeeks.org/wildcard-character-matching/"><span style="font-size: 10pt;">http://www.geeksforgeeks.org/wildcard-character-matching/#</span></a><span style="color: black; font-size: 10pt;"><br /> </span></p>

</div>


  <footer class="container">
  <div class="container navigation no-print">
  <h2>Navigation</h2>
  
  

    
    <a class="prev" href="http://www.gsymy.com/2015/10/13/libtcmalloc-so-4-linkerror.html" title="libtcmalloc.so.4 链接失败">
      Previous
    </a>
    

    
    <a class="next" href="http://www.gsymy.com/2015/10/16/female_programmer.html" title="一张图–论女程序员为什么这么少">
      Next
    </a>
    

  


</div>

  <div class="container comments">
  <h2>Comments</h2>
  
<div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
    
    
    if (window.location.hostname == "localhost")
      return;

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//your_disqus_shortname.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


</div>

</footer>

</article>
      <footer id="main-footer" class="container main_footer">
  

  <div class="container nav foot no-print">
  

  <a class="toplink" href="#">back to top</a>

</div>

  <div class="container credits">
  
<div class="container footline">
  
  code with <i class='fa fa-heart'></i>


</div>


  
<div class="container copyright">
  
  &copy; 2016 gsymy.com.


</div>


</div>

</footer>

    </main>
    
<script type="text/javascript">
  (function() {
    
    
    if (window.location.hostname == "localhost")
      return;

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//your_disqus_shortname.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



<script src="http://www.gsymy.com/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'Your Google Analytics tracking code', 'auto');
  ga('send', 'pageview');

</script>


    <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1256010403'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1256010403%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>

  </body>
</html>

